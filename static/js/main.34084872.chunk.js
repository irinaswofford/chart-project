(this["webpackJsonpcode-exemp"]=this["webpackJsonpcode-exemp"]||[]).push([[0],{80:function(e,t,a){e.exports=a(94)},85:function(e,t,a){},87:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(30),o=a.n(i),c=(a(85),a(34)),s=a(6),l=a.n(s),d=a(21),m=a(31),u=a(32),v=a(35),h=a(33),g=a(3),f=a(36),p=a(1),y=a(11),D=(a(87),a(2)),C=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(v.a)(this,Object(h.a)(t).call(this,e))).state={dataSortedByDevice:{},dateMonthDay:(new Date).toLocaleString("default",{month:"long",day:"2-digit",year:"numeric"})},a.FetchDataTSV=a.FetchDataTSV.bind(Object(g.a)(a)),a.ProcessRawDataTSV=a.ProcessRawDataTSV.bind(Object(g.a)(a)),a.SortDataByDevice=a.SortDataByDevice.bind(Object(g.a)(a)),a.ConvertToTime24HR=a.ConvertToTime24HR.bind(Object(g.a)(a)),a.GetRandomColor=a.GetRandomColor.bind(Object(g.a)(a)),a.InitLineChart=a.InitLineChart.bind(Object(g.a)(a)),a.DrawLine=a.DrawLine.bind(Object(g.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,r,n,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FetchDataTSV();case 2:return t=e.sent,a=this.ProcessRawDataTSV(t)||[{timestamp:new Date}],r=(new Date(a[0].timestamp)||new Date).toLocaleString("default",{month:"long",day:"2-digit",year:"numeric"}),n=this.SortDataByDevice(a),e.next=8,this.setState({dataSortedByDevice:n||{},dateMonthDay:r});case 8:for(o in i=this.InitLineChart(a),n)c=n[o],this.DrawLine(c,i);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"FetchDataTSV",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://raw.githubusercontent.com/hologram-io/carthage/master/usage.tsv",t=[],e.next=4,Object(y.a)("https://raw.githubusercontent.com/hologram-io/carthage/master/usage.tsv").then((function(e){null!==e&&0!==e.length||console.log("problem fetching data, data was empty"),t=e}));case 4:return e.abrupt("return",t||[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"ProcessRawDataTSV",value:function(e){var t=this;return e.map((function(e,a){return e.deviceid=Number(e.deviceid),e.usage=Number(e.usage),e.x=Number(e.x),e.y=Number(e.y),e.timestamp=t.ConvertToTime24HR(e.timestamp),e}))}},{key:"SortDataByDevice",value:function(e){var t=this,a={};for(var r in e.forEach((function(e,r){var n=e.deviceid,i="";n in a||(a[n]=[],i=t.GetRandomColor()),e.colorCodeHex=i,a[n].push(e)})),delete a[5537],a)a[r].sort((function(e,t){var a=Date(e.timestamp),r=Date(t.timestamp);return a<r?-1:a===r?0:1}));return a}},{key:"ConvertToTime24HR",value:function(e){var t=e.replace("AM","").replace("PM",""),a=e.includes("AM")?"AM":e.includes("PM")?"PM":"",r=t.split(":"),n=Object(c.a)(r,2),i=n[0],o=n[1];"12"===i&&(i="00"),"PM"===a&&(i=parseInt(i,10)+12);var s=new Date,l=s.getFullYear(),d=s.getUTCMonth(),m=s.getUTCDay();return new Date(l,d,m,i,o).getTime()}},{key:"GetRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"InitLineChart",value:function(e){var t=p.i("#svgLineChart"),a=50,r=50,n=50,i=100,o=p.f(e,(function(e){return e.timestamp})),c=p.e(e,(function(e){return e.timestamp})),s=p.h().domain([o,c]).range([i,1200-r]),l=p.g().range([660-a,n]).domain([p.f(e,(function(e){return e.usage<200?e.usage:0})),p.e(e,(function(e){return e.usage<200?e.usage:0}))]),d=p.a(s).tickSize(5),m=p.b(l).tickSize(5);return t.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+(660-n)+")").call(d),t.append("svg:g").attr("class","y axis").attr("transform","translate("+i+",0)").call(m),t.append("text").attr("transform","translate(600 ,660)").style("text-anchor","middle").style("font-weight","bold").style("font-size","18px").text("Date & Time"),t.append("text").attr("transform","rotate(-90)").attr("y",0-i).attr("x",-330).attr("dy","9em").style("text-anchor","middle").style("font-weight","bold").style("font-size","18px").text("Device Usage"),{vis:t,xRange:s,yRange:l}}},{key:"DrawLine",value:function(e,t){var a=t.vis,r=t.xRange,n=t.yRange,i=null!==e&&e.length>0?e[0].colorCodeHex:"",o=p.d().x((function(e){return r(e.timestamp)})).y((function(e){return n(e.usage)})).curve(p.c);a.append("svg:path").attr("d",o(e)).attr("stroke",i).attr("stroke-width",6).attr("fill","none")}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"divGraphHolder"},n.a.createElement("div",{className:"headerChartGrid"},"Device Usage for ",this.state.dateMonthDay),n.a.createElement("svg",{id:"svgLineChart",width:"1200",height:"700",style:{color:"#000000",margin:"0px auto"}}),n.a.createElement("div",{style:{margin:"0px auto 0px auto",padding:"5px",textAlign:"center",minWidth:"60%"}},n.a.createElement("div",{className:"subheaderChart"},"Legend"),n.a.createElement("div",{className:"flexContainer_legend"},Object.keys(this.state.dataSortedByDevice).map((function(t,a){var r=e.state.dataSortedByDevice[t];if(null===r||0===r.length||1===r.length)return!0;var i=r[0].colorCodeHex;return n.a.createElement("div",{className:"flexItem_legend",key:a},n.a.createElement("div",{className:"divColorCodeSquare",style:{backgroundColor:i}}),n.a.createElement("div",null,"DeviceId: ",t))}))))),n.a.createElement("div",{className:"divGridHolder"},n.a.createElement("div",{className:"headerChartGrid"},"Device Usage Grid for ",this.state.dateMonthDay),n.a.createElement(D.Row,{className:"grid-row rowGrid"},n.a.createElement(D.Col,{className:"grid columnGridHeader",sm:3,md:3},"Device ID"),n.a.createElement(D.Col,{className:"grid columnGridHeader",sm:3,md:3},"Peak Usage"),n.a.createElement(D.Col,{className:"grid columnGridHeader",sm:3,md:3},"Total Usage"),n.a.createElement(D.Col,{className:"grid columnGridHeader",sm:3,md:3},"Color Code")),Object.keys(this.state.dataSortedByDevice).map((function(t,a){var r=e.state.dataSortedByDevice[t];if(null===r||0===r.length||1===r.length)return!0;var i=r[0].colorCodeHex,o=0;r.forEach((function(e,t){o+=e.usage}));var c=r.slice();c.sort((function(e,t){return t.usage-e.usage}));var s=c[0].usage,l=c[0].timestamp,d=new Date(l).toLocaleString("default",{hour:"2-digit",minute:"2-digit"});return n.a.createElement(D.Row,{className:"grid-row rowGrid",key:a},n.a.createElement(D.Col,{className:"grid columnGrid",sm:3,md:3},t),n.a.createElement(D.Col,{className:"grid columnGrid",sm:3,md:3},s," at ",d),n.a.createElement(D.Col,{className:"grid columnGrid",sm:3,md:3},o),n.a.createElement(D.Col,{className:"grid columnGrid",sm:3,md:3},n.a.createElement("div",{className:"divColorCodeSquare",style:{backgroundColor:i}})))}))))}}]),t}(n.a.Component);var b=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[80,1,2]]]);
//# sourceMappingURL=main.34084872.chunk.js.map